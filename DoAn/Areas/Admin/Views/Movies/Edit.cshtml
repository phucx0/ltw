@model DoAn.ViewModels.MovieViewModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="admin-page">

    <div class="admin-header">
        <h2 class="admin-title">Chỉnh sửa phim</h2>
    </div>

    <form asp-action="Edit" asp-controller="Movies" asp-area="Admin" method="post">

        <input type="hidden" name="MovieId" value="@Model.MovieId" />

        <div style="display: flex; align-items: center; justify-content: space-between;">
            <a asp-action="Index" asp-controller="Movies" asp-area="Admin" class="btn btn-secondary">
                Quay lại
            </a>
            <button type="submit" class="btn btn-secondary">Lưu thay đổi</button>
        </div>

        <div class="form-wrapper">

            <!-- Thông tin cơ bản -->
            <div class="form-section">
                <div class="form-section-title">Thông tin cơ bản</div>

                <div class="form-field">
                    <label>Tên phim</label>
                    <input type="text" name="Title" value="@Model.Title" />
                </div>

                <div class="form-field">
                    <label>Mô tả</label>
                    <input type="text" name="Description" value="@Model.Description" />
                </div>
            </div>

            <!-- Thể loại -->
            <div class="form-section">
                <div class="form-section-title">Thể loại</div>

                <div class="checkbox-group">
                    @foreach (var genre in Model.AllGenres)
                    {
                        <label class="checkbox-item">
                            <input type="checkbox" name="SelectedGenres" value="@genre"
                                   @(Model.SelectedGenres.Contains(genre.ToString()) ? "checked" : "") />
                            <span>@genre</span>
                        </label>
                    }
                </div>
            </div>

            <!-- Diễn viên -->
            <div class="form-section">
                <div class="form-section-title">Diễn viên</div>

                @foreach (var actor in Model.AllActors)
                {
                    <label>
                        <input type="checkbox" name="SelectedActorIds"
                               value="@actor.ActorId"
                               @(Model.SelectedActorIds.Contains(actor.ActorId) ? "checked" : "") />
                        @actor.ActorName
                    </label>
                }
            </div>

            <!-- Đạo diễn -->
            <div class="form-section">
                <div class="form-section-title">Đạo diễn</div>

                @foreach (var dir in Model.AllDirectors)
                {
                    <label>
                        <input type="checkbox" name="SelectedDirectorIds"
                               value="@dir.DirectorId"
                               @(Model.SelectedDirectorIds.Contains(dir.DirectorId) ? "checked" : "") />
                        @dir.DirectorName
                    </label>
                }
            </div>

            <!-- Thời lượng & Lịch chiếu & Trạng thái  -->
            <div class="form-section">
                <div class="form-section-title">Thời lượng & Lịch chiếu & Trạng thái</div>

                <div class="form-field">
                    <label>Thời lượng</label>
                    <input type="number" name="Duration" value="@Model.Duration" />
                </div>

                <div class="form-field">
                    <label>Ngày khởi chiếu</label>
                    <input type="date" name="ReleaseDate" value="@Model.ReleaseDate.ToString("yyyy-MM-dd")" />
                </div>

                <div class="form-field">
                    <label>Trạng thái</label>
                    <input type="text" name="Status" value="@Model.Status" />
                </div>
            </div>

            <!-- Đánh giá -->
            <div class="form-section">
                <div class="form-section-title">Phân loại độ tuổi & điểm IMDB</div>

                <div class="form-field">
                    <select name="RatingId" class="form-select">
                        <option value="">-- Chọn độ tuổi --</option>
                        @foreach (var rate in Model.AllRatings)
                        {
                            <option value="@rate.RatingId" selected="@(rate.RatingId == Model.RatingId)">
                                @rate.RatingCode
                            </option>
                        }
                    </select>
                </div>

                <div class="form-field">
                    <label>IMDB Rating</label>
                    <input type="number" step="0.1" name="ImdbRating" value="@Model.ImdbRating" />
                </div>
            </div>


            <!-- Media -->
            <div class="form-section">
                <div class="form-section-title">Media</div>

                <div class="form-field">
                    <label>URL ảnh bìa</label>
                    <input type="text" name="CoverUrl" value="@Model.CoverUrl" />
                </div>

                <div class="form-field">
                    <label>URL Poster</label>
                    <input type="text" name="PosterUrl" value="@Model.PosterUrl" />
                </div>

                <div class="form-field">
                    <label>URL Trailer</label>
                    <input type="text" name="TrailerUrl" value="@Model.TrailerUrl" />
                </div>
            </div>
        </div>
    </form>
</div>
