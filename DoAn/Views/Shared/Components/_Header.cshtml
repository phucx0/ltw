@{
    // var userEmail = Context.Request.Cookies["UserEmail"];
    // bool isGuest = String.IsNullOrEmpty(userEmail);
    bool isGuest = !User.Identity.IsAuthenticated;
    string currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    string currentAction = ViewContext.RouteData.Values["action"]?.ToString();
    bool isUserPage = currentController == "User";

    var userEmail = User.FindFirst(System.Security.Claims.ClaimTypes.Email)?.Value;
    var fullName = User.Identity.Name;
}

<header class="@(isUserPage ? "" : "header-fixed")">
    <div class="header-content @(isUserPage ? "" : "_header-fixed")">
        <a href="@Url.Action("Index", "Home")" class="text-decoration-none">
            <div class="logo text-white fw-bold fs-3">
                CINEMA
            </div>
        </a>
         <!-- Navbar + User -->
        <div class="navbar-container d-flex align-items-center gap-3">
            <a href="#">Đang chiếu</a>
            <a href="#">Sắp chiếu</a>
            <a href="#">Mô tả</a>
            <a href="#">Mô tả</a>
            @if (isGuest)
            {
                <a href="@Url.Action("Login", "Auth")" class="login-btn">
                    Tài khoản
                </a>
            }
            else
            {
                <div class="d-flex gap-2 align-items-center">
                    <a href="@Url.Action("Profile", "User")" class="login-btn">
                        @fullName
                    </a>
                </div>
            }
        </div>

        <!-- Search ép sát phải -->
        <form asp-controller="Search" asp-action="Index" method="get"
              class="d-flex align-items-center ms-auto" style="max-width:250px;">
            <input type="text" name="query" class="form-control form-control-sm"
                   placeholder="Tìm phim..." />
            <button type="submit" class="btn btn-sm btn-outline-light ms-1">
                <i class="bi bi-search"></i>
            </button>
        </form>

    </div>
</header>